&ACCESS RVP
&REL 117
&PARAM TEMPLATE = C:\KRC\Roboter\Template\vorgabe
&PARAM EDITMASK = *
DEF CONST_FORCE( )
DECL BOOL TEMP, TEMP2
DECL TORQUE_TCP_EST MyTorque
;FOLD INI
  ;FOLD BASISTECH INI
    GLOBAL INTERRUPT DECL 3 WHEN $STOPMESS==TRUE DO IR_STOPM ( )
    INTERRUPT ON 3 
    BAS (#INITMOV,0 )
  ;ENDFOLD (BASISTECH INI)
  ;FOLD USER INI
    ;Make your modifications here

  ;ENDFOLD (USER INI)
;ENDFOLD (INI)

$STIFFNESS.STRATEGY=10
$STIFFNESS.COMMIT=TRUE
$OV_PRO=50

;PTP {X 12.5,Y -587.5,Z 61.75,A -90,B 0,C 180}
;FOLD PTP P2 Vel=100 % DEFAULT Tool[5]:Pneumatic_gripper_probe Base[0];%{PE}%R 5.6.11,%MKUKATPBASIS,%CMOVE,%VPTP,%P 1:PTP, 2:P2, 3:, 5:100, 7:DEFAULT
$BWDSTART=FALSE
PDAT_ACT=PDEFAULT
FDAT_ACT=FP2
BAS(#PTP_PARAMS,100)
PTP XP2 
;ENDFOLD

;FOLD PTP P1 Vel=75 % PDAT1 Tool[5]:Pneumatic_gripper_probe Base[0];%{PE}%R 5.6.11,%MKUKATPBASIS,%CMOVE,%VPTP,%P 1:PTP, 2:P1, 3:, 5:75, 7:PDAT1
$BWDSTART=FALSE
PDAT_ACT=PPDAT1
FDAT_ACT=FP1
BAS(#PTP_PARAMS,75)
PTP XP1 
;ENDFOLD
;PTP {A6 -90}

TEMP=SETFORCE("Z", 5.0)

$OV_PRO=1

REPEAT
  LIN_REL{Z -5}
  MyTorque=$TORQUE_TCP_EST
UNTIL MyTorque.FT.Z >=1

HALT

$STIFFNESS.STRATEGY=10
$STIFFNESS.COMMIT=TRUE
$OV_PRO=75

;FOLD PTP P5 Vel=100 % PDAT4 Tool[5]:Pneumatic_gripper_probe Base[0];%{PE}%R 5.6.11,%MKUKATPBASIS,%CMOVE,%VPTP,%P 1:PTP, 2:P5, 3:, 5:100, 7:PDAT4
$BWDSTART=FALSE
PDAT_ACT=PPDAT4
FDAT_ACT=FP5
BAS(#PTP_PARAMS,100)
PTP XP5 
;ENDFOLD

END