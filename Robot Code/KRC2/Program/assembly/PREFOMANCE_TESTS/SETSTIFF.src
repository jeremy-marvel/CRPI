&ACCESS RO
&REL 24
&PARAM TEMPLATE = C:\KRC\Roboter\Template\FunctionVorgabe
&PARAM EDITMASK = *
DEFFCT BOOL SETSTIFF(DIRECTION:IN,STIFFNESS:IN )
DECL STIFFNESS USERSTIFF
DECL REAL X1
DECL REAL Y1
DECL REAL Z1
CHAR DIRECTION
REAL STIFFNESS
X1=2000.0
Y1=2000.0
Z1=4000.0
IF DIRECTION=="X" THEN
  X1=STIFFNESS
ENDIF
IF DIRECTION=="Y" THEN
  Y1=STIFFNESS
ENDIF
IF DIRECTION=="Z" THEN
  Z1=STIFFNESS
ENDIF
IF DIRECTION=="V" THEN
  X1=STIFFNESS
  Y1=STIFFNESS
ENDIF

USERSTIFF=$STIFFNESS
USERSTIFF.STRATEGY=20
USERSTIFF.FRAMETYPE=#BASE
USERSTIFF.TOOL=TOOL_DATA[5]
USERSTIFF.BASE=$BASE
USERSTIFF.CPSTIFFNESS.X=X1
USERSTIFF.CPSTIFFNESS.Y=Y1
USERSTIFF.CPSTIFFNESS.Z=Z1
USERSTIFF.CPSTIFFNESS.A=200
USERSTIFF.CPSTIFFNESS.B=200
USERSTIFF.CPSTIFFNESS.C=200
USERSTIFF.CPDAMPING={X 0.7,Y 0.7,Z 0.7,A 0.7,B 0.7,C 0.7}
USERSTIFF.AXISSTIFFNESS={A1 2000.0,A2 2000.0,A3 2000.0,A4 2000.0,A5 2000.0,A6 2000.0,E1 2000.0}
USERSTIFF.AXISDAMPING={A1 0.7,A2 0.7,A3 0.7,A4 0.7,A5 0.7,A6 0.7,E1 0.7}
USERSTIFF.CPMAXDELTA={X 50.0,Y 50.0,Z 50.0,A 2.0,B 2.0,C 2.0}
USERSTIFF.MAXFORCE={X 70.0,Y 200.0,Z 200.0,A 10.0,B 10.0,C 10.0}
USERSTIFF.AXISMAXDELTA={A1 10.0,A2 10.0,A3 10.0,A4 10.0,A5 10.0,A6 10.0,E1 10.0}
USERSTIFF.AXISMAXDELTATRQ={A1 2.0,A2 2.0,A3 2.0,A4 2.0,A5 2.0,A6 2.0,E1 2.0}
$STIFFNESS=USERSTIFF

RETURN TRUE
ENDFCT