<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>My Project: cart_comm.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">cart_comm.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="cart__comm_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="preprocessor">#ifndef CART_COMM_H</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="preprocessor">#define CART_COMM_H</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;</div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#include &quot;ulapi.h&quot;</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="cart__status__copy_8h.html">cart_status_copy.h</a>&quot;</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;</div><div class="line"><a name="l00020"></a><span class="lineno"><a class="line" href="classcart__comm.html">   20</a></span>&#160;<span class="keyword">class </span><a class="code" href="classcart__comm.html">cart_comm</a></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;{</div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;</div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="keyword">private</span>:</div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;    ulapi_integer server_id;</div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;    ulapi_integer port;</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;    ulapi_mutex_struct* mutex;</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    <span class="keywordtype">void</span>* connect_sem;</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    <span class="keywordtype">int</span> max_clients;</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    <span class="keywordtype">int</span> client_count;</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    <a class="code" href="classcart__status__copy.html">cart_status_copy</a>** client_arr;</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    <span class="keywordtype">void</span> comm_err(<span class="keywordtype">int</span> err, <span class="keywordtype">char</span>* msg);</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    <span class="keywordtype">void</span> shift_clients(<span class="keywordtype">int</span> start);</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="keyword">public</span>:</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    </div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    <a class="code" href="classcart__comm.html#ab336b3d84b33ef32621e083dd4006b67">cart_comm</a>(ulapi_integer server_port, <span class="keywordtype">int</span> num_clients, ulapi_id key_m, ulapi_id key_s);</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    <a class="code" href="classcart__comm.html#af3b54bc88abece9901b0dc1a535c28f0">~cart_comm</a>();</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;<span class="comment">//Connection management</span></div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="classcart__comm.html#a331ab61e71d5f94f413de56737322547">cart_comm_init</a>();</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="classcart__comm.html#a51c43bf924607212e128f75006defed8">cart_connect</a>();</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="classcart__comm.html#acde9fbf68884955ccfd94a907add2396">client_disconnect</a>(ulapi_integer client_id);</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    ulapi_integer <a class="code" href="classcart__comm.html#a9f5d2a267cb9dd82603cea7656ad57fc">get_client_id</a>(<span class="keywordtype">int</span> index);</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="classcart__comm.html#a6dcf8cc0eedecebcd436653da2ab680d">get_client_index</a>(ulapi_integer client_id);</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="classcart__comm.html#a33db5a17772cf87452ebdfae4547e152">get_client_count</a>();</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    ulapi_integer <a class="code" href="classcart__comm.html#acea9c1ef1278323dd0e387b34c5c8015">simple_scheduler</a>();</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classcart__comm.html#a18d4c10fb7af8cb219460461fa5967f5">select_client</a>(<span class="keywordtype">int</span> client_id, <a class="code" href="classcart__status__copy.html">cart_status_copy</a>** copied_client);</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classcart__comm.html#a00fdba1bcb1d3e7234c83a1b2d692947">print_client_ids</a>();</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classcart__comm.html#a46b117a719b4844c97b570229c82cbc8">print_client_status</a>();</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="classcart__comm.html#aa4aa3baa5fae85a6469ae9683a6d2cbc">update_status_init</a>(<a class="code" href="classcart__status__copy.html">cart_status_copy</a>* new_stat);</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classcart__comm.html#ac3827fcfb77461137bf7a061471c7feb">update_status</a>();</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classcart__comm.html#ac3827fcfb77461137bf7a061471c7feb">update_status</a>(<a class="code" href="structld__msg__pose.html">ld_msg_pose</a>* new_pose);</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="classcart__comm.html#a0fd670aab891757e6371a66c4b48b0a3">send</a>(<span class="keywordtype">char</span>* buf, ulapi_integer client_id);</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="classcart__comm.html#ae135775f8ce91e322bd83ece751552b4">send_init</a>(<span class="keywordtype">char</span>* buf, <a class="code" href="classcart__status__copy.html">cart_status_copy</a>* new_stat);</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="classcart__comm.html#ab7f3cc745c6935abadf38a87a00740c8">recv</a>(<span class="keywordtype">char</span>* buf, ulapi_integer client_id, <span class="keywordtype">int</span> len);</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="classcart__comm.html#a36848cb536204242a3ee45d9bb753b8a">cart_comm_read</a>(<span class="keywordtype">char</span>** cart_comm_recv_buf, ulapi_integer client_id);</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="classcart__comm.html#a9982dd0f466dd95898ebe0cf6fd168c5">cart_comm_read_init</a>(<span class="keywordtype">char</span>** cart_comm_recv_buf, <a class="code" href="classcart__status__copy.html">cart_status_copy</a>* new_stat);</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classcart__comm.html#a90f2c5d14510aabfa28439a05e5bebb6">update_previous_dock</a>(ulapi_integer client_id);</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;};</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;<span class="preprocessor">#endif</span></div><div class="ttc" id="classcart__comm_html_a6dcf8cc0eedecebcd436653da2ab680d"><div class="ttname"><a href="classcart__comm.html#a6dcf8cc0eedecebcd436653da2ab680d">cart_comm::get_client_index</a></div><div class="ttdeci">int get_client_index(ulapi_integer client_id)</div><div class="ttdef"><b>Definition:</b> cart_comm.cpp:240</div></div>
<div class="ttc" id="classcart__comm_html_ae135775f8ce91e322bd83ece751552b4"><div class="ttname"><a href="classcart__comm.html#ae135775f8ce91e322bd83ece751552b4">cart_comm::send_init</a></div><div class="ttdeci">int send_init(char *buf, cart_status_copy *new_stat)</div><div class="ttdef"><b>Definition:</b> cart_comm.cpp:482</div></div>
<div class="ttc" id="classcart__comm_html_a00fdba1bcb1d3e7234c83a1b2d692947"><div class="ttname"><a href="classcart__comm.html#a00fdba1bcb1d3e7234c83a1b2d692947">cart_comm::print_client_ids</a></div><div class="ttdeci">void print_client_ids()</div><div class="ttdef"><b>Definition:</b> cart_comm.cpp:419</div></div>
<div class="ttc" id="classcart__comm_html_aa4aa3baa5fae85a6469ae9683a6d2cbc"><div class="ttname"><a href="classcart__comm.html#aa4aa3baa5fae85a6469ae9683a6d2cbc">cart_comm::update_status_init</a></div><div class="ttdeci">int update_status_init(cart_status_copy *new_stat)</div><div class="ttdef"><b>Definition:</b> cart_comm.cpp:329</div></div>
<div class="ttc" id="classcart__comm_html_a33db5a17772cf87452ebdfae4547e152"><div class="ttname"><a href="classcart__comm.html#a33db5a17772cf87452ebdfae4547e152">cart_comm::get_client_count</a></div><div class="ttdeci">int get_client_count()</div><div class="ttdef"><b>Definition:</b> cart_comm.cpp:259</div></div>
<div class="ttc" id="classcart__comm_html_acde9fbf68884955ccfd94a907add2396"><div class="ttname"><a href="classcart__comm.html#acde9fbf68884955ccfd94a907add2396">cart_comm::client_disconnect</a></div><div class="ttdeci">int client_disconnect(ulapi_integer client_id)</div><div class="ttdef"><b>Definition:</b> cart_comm.cpp:190</div></div>
<div class="ttc" id="classcart__comm_html_a9f5d2a267cb9dd82603cea7656ad57fc"><div class="ttname"><a href="classcart__comm.html#a9f5d2a267cb9dd82603cea7656ad57fc">cart_comm::get_client_id</a></div><div class="ttdeci">ulapi_integer get_client_id(int index)</div><div class="ttdef"><b>Definition:</b> cart_comm.cpp:228</div></div>
<div class="ttc" id="classcart__comm_html_a331ab61e71d5f94f413de56737322547"><div class="ttname"><a href="classcart__comm.html#a331ab61e71d5f94f413de56737322547">cart_comm::cart_comm_init</a></div><div class="ttdeci">int cart_comm_init()</div><div class="ttdef"><b>Definition:</b> cart_comm.cpp:135</div></div>
<div class="ttc" id="structld__msg__pose_html"><div class="ttname"><a href="structld__msg__pose.html">ld_msg_pose</a></div><div class="ttdef"><b>Definition:</b> ld_msg.h:17</div></div>
<div class="ttc" id="classcart__comm_html_ab336b3d84b33ef32621e083dd4006b67"><div class="ttname"><a href="classcart__comm.html#ab336b3d84b33ef32621e083dd4006b67">cart_comm::cart_comm</a></div><div class="ttdeci">cart_comm(ulapi_integer server_port, int num_clients, ulapi_id key_m, ulapi_id key_s)</div><div class="ttdef"><b>Definition:</b> cart_comm.cpp:70</div></div>
<div class="ttc" id="classcart__comm_html_a36848cb536204242a3ee45d9bb753b8a"><div class="ttname"><a href="classcart__comm.html#a36848cb536204242a3ee45d9bb753b8a">cart_comm::cart_comm_read</a></div><div class="ttdeci">int cart_comm_read(char **cart_comm_recv_buf, ulapi_integer client_id)</div><div class="ttdef"><b>Definition:</b> cart_comm.cpp:531</div></div>
<div class="ttc" id="classcart__comm_html_acea9c1ef1278323dd0e387b34c5c8015"><div class="ttname"><a href="classcart__comm.html#acea9c1ef1278323dd0e387b34c5c8015">cart_comm::simple_scheduler</a></div><div class="ttdeci">ulapi_integer simple_scheduler()</div><div class="ttdef"><b>Definition:</b> cart_comm.cpp:271</div></div>
<div class="ttc" id="classcart__status__copy_html"><div class="ttname"><a href="classcart__status__copy.html">cart_status_copy</a></div><div class="ttdef"><b>Definition:</b> cart_status_copy.h:22</div></div>
<div class="ttc" id="classcart__comm_html_a90f2c5d14510aabfa28439a05e5bebb6"><div class="ttname"><a href="classcart__comm.html#a90f2c5d14510aabfa28439a05e5bebb6">cart_comm::update_previous_dock</a></div><div class="ttdeci">void update_previous_dock(ulapi_integer client_id)</div><div class="ttdef"><b>Definition:</b> cart_comm.cpp:618</div></div>
<div class="ttc" id="cart__status__copy_8h_html"><div class="ttname"><a href="cart__status__copy_8h.html">cart_status_copy.h</a></div><div class="ttdoc">Definitions for data structure storing cart service status information. </div></div>
<div class="ttc" id="classcart__comm_html_af3b54bc88abece9901b0dc1a535c28f0"><div class="ttname"><a href="classcart__comm.html#af3b54bc88abece9901b0dc1a535c28f0">cart_comm::~cart_comm</a></div><div class="ttdeci">~cart_comm()</div><div class="ttdef"><b>Definition:</b> cart_comm.cpp:95</div></div>
<div class="ttc" id="classcart__comm_html_a0fd670aab891757e6371a66c4b48b0a3"><div class="ttname"><a href="classcart__comm.html#a0fd670aab891757e6371a66c4b48b0a3">cart_comm::send</a></div><div class="ttdeci">int send(char *buf, ulapi_integer client_id)</div><div class="ttdef"><b>Definition:</b> cart_comm.cpp:452</div></div>
<div class="ttc" id="classcart__comm_html_a46b117a719b4844c97b570229c82cbc8"><div class="ttname"><a href="classcart__comm.html#a46b117a719b4844c97b570229c82cbc8">cart_comm::print_client_status</a></div><div class="ttdeci">void print_client_status()</div><div class="ttdef"><b>Definition:</b> cart_comm.cpp:439</div></div>
<div class="ttc" id="classcart__comm_html_a9982dd0f466dd95898ebe0cf6fd168c5"><div class="ttname"><a href="classcart__comm.html#a9982dd0f466dd95898ebe0cf6fd168c5">cart_comm::cart_comm_read_init</a></div><div class="ttdeci">int cart_comm_read_init(char **cart_comm_recv_buf, cart_status_copy *new_stat)</div><div class="ttdef"><b>Definition:</b> cart_comm.cpp:572</div></div>
<div class="ttc" id="classcart__comm_html_ac3827fcfb77461137bf7a061471c7feb"><div class="ttname"><a href="classcart__comm.html#ac3827fcfb77461137bf7a061471c7feb">cart_comm::update_status</a></div><div class="ttdeci">void update_status()</div><div class="ttdef"><b>Definition:</b> cart_comm.cpp:354</div></div>
<div class="ttc" id="classcart__comm_html"><div class="ttname"><a href="classcart__comm.html">cart_comm</a></div><div class="ttdef"><b>Definition:</b> cart_comm.h:20</div></div>
<div class="ttc" id="classcart__comm_html_a51c43bf924607212e128f75006defed8"><div class="ttname"><a href="classcart__comm.html#a51c43bf924607212e128f75006defed8">cart_comm::cart_connect</a></div><div class="ttdeci">int cart_connect()</div><div class="ttdef"><b>Definition:</b> cart_comm.cpp:148</div></div>
<div class="ttc" id="classcart__comm_html_ab7f3cc745c6935abadf38a87a00740c8"><div class="ttname"><a href="classcart__comm.html#ab7f3cc745c6935abadf38a87a00740c8">cart_comm::recv</a></div><div class="ttdeci">int recv(char *buf, ulapi_integer client_id, int len)</div><div class="ttdef"><b>Definition:</b> cart_comm.cpp:512</div></div>
<div class="ttc" id="classcart__comm_html_a18d4c10fb7af8cb219460461fa5967f5"><div class="ttname"><a href="classcart__comm.html#a18d4c10fb7af8cb219460461fa5967f5">cart_comm::select_client</a></div><div class="ttdeci">void select_client(int client_id, cart_status_copy **copied_client)</div><div class="ttdef"><b>Definition:</b> cart_comm.cpp:296</div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
