<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>My Project: cart_comm Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classcart__comm-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">cart_comm Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="cart__comm_8h_source.html">cart_comm.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ab336b3d84b33ef32621e083dd4006b67"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcart__comm.html#ab336b3d84b33ef32621e083dd4006b67">cart_comm</a> (ulapi_integer server_port, int num_clients, ulapi_id key_m, ulapi_id key_s)</td></tr>
<tr class="separator:ab336b3d84b33ef32621e083dd4006b67"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af3b54bc88abece9901b0dc1a535c28f0"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcart__comm.html#af3b54bc88abece9901b0dc1a535c28f0">~cart_comm</a> ()</td></tr>
<tr class="separator:af3b54bc88abece9901b0dc1a535c28f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a331ab61e71d5f94f413de56737322547"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcart__comm.html#a331ab61e71d5f94f413de56737322547">cart_comm_init</a> ()</td></tr>
<tr class="separator:a331ab61e71d5f94f413de56737322547"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a51c43bf924607212e128f75006defed8"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcart__comm.html#a51c43bf924607212e128f75006defed8">cart_connect</a> ()</td></tr>
<tr class="separator:a51c43bf924607212e128f75006defed8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acde9fbf68884955ccfd94a907add2396"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcart__comm.html#acde9fbf68884955ccfd94a907add2396">client_disconnect</a> (ulapi_integer client_id)</td></tr>
<tr class="separator:acde9fbf68884955ccfd94a907add2396"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f5d2a267cb9dd82603cea7656ad57fc"><td class="memItemLeft" align="right" valign="top">ulapi_integer&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcart__comm.html#a9f5d2a267cb9dd82603cea7656ad57fc">get_client_id</a> (int index)</td></tr>
<tr class="separator:a9f5d2a267cb9dd82603cea7656ad57fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6dcf8cc0eedecebcd436653da2ab680d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcart__comm.html#a6dcf8cc0eedecebcd436653da2ab680d">get_client_index</a> (ulapi_integer client_id)</td></tr>
<tr class="separator:a6dcf8cc0eedecebcd436653da2ab680d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a33db5a17772cf87452ebdfae4547e152"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcart__comm.html#a33db5a17772cf87452ebdfae4547e152">get_client_count</a> ()</td></tr>
<tr class="separator:a33db5a17772cf87452ebdfae4547e152"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acea9c1ef1278323dd0e387b34c5c8015"><td class="memItemLeft" align="right" valign="top">ulapi_integer&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcart__comm.html#acea9c1ef1278323dd0e387b34c5c8015">simple_scheduler</a> ()</td></tr>
<tr class="separator:acea9c1ef1278323dd0e387b34c5c8015"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a18d4c10fb7af8cb219460461fa5967f5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcart__comm.html#a18d4c10fb7af8cb219460461fa5967f5">select_client</a> (int client_id, <a class="el" href="classcart__status__copy.html">cart_status_copy</a> **copied_client)</td></tr>
<tr class="separator:a18d4c10fb7af8cb219460461fa5967f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a00fdba1bcb1d3e7234c83a1b2d692947"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcart__comm.html#a00fdba1bcb1d3e7234c83a1b2d692947">print_client_ids</a> ()</td></tr>
<tr class="separator:a00fdba1bcb1d3e7234c83a1b2d692947"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a46b117a719b4844c97b570229c82cbc8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcart__comm.html#a46b117a719b4844c97b570229c82cbc8">print_client_status</a> ()</td></tr>
<tr class="separator:a46b117a719b4844c97b570229c82cbc8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa4aa3baa5fae85a6469ae9683a6d2cbc"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcart__comm.html#aa4aa3baa5fae85a6469ae9683a6d2cbc">update_status_init</a> (<a class="el" href="classcart__status__copy.html">cart_status_copy</a> *new_stat)</td></tr>
<tr class="separator:aa4aa3baa5fae85a6469ae9683a6d2cbc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3827fcfb77461137bf7a061471c7feb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcart__comm.html#ac3827fcfb77461137bf7a061471c7feb">update_status</a> ()</td></tr>
<tr class="separator:ac3827fcfb77461137bf7a061471c7feb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6724898e4c76e4e802c4bc6b814130bc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcart__comm.html#a6724898e4c76e4e802c4bc6b814130bc">update_status</a> (<a class="el" href="structld__msg__pose.html">ld_msg_pose</a> *new_pose)</td></tr>
<tr class="separator:a6724898e4c76e4e802c4bc6b814130bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0fd670aab891757e6371a66c4b48b0a3"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcart__comm.html#a0fd670aab891757e6371a66c4b48b0a3">send</a> (char *buf, ulapi_integer client_id)</td></tr>
<tr class="separator:a0fd670aab891757e6371a66c4b48b0a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae135775f8ce91e322bd83ece751552b4"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcart__comm.html#ae135775f8ce91e322bd83ece751552b4">send_init</a> (char *buf, <a class="el" href="classcart__status__copy.html">cart_status_copy</a> *new_stat)</td></tr>
<tr class="separator:ae135775f8ce91e322bd83ece751552b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab7f3cc745c6935abadf38a87a00740c8"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcart__comm.html#ab7f3cc745c6935abadf38a87a00740c8">recv</a> (char *buf, ulapi_integer client_id, int len)</td></tr>
<tr class="separator:ab7f3cc745c6935abadf38a87a00740c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a36848cb536204242a3ee45d9bb753b8a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcart__comm.html#a36848cb536204242a3ee45d9bb753b8a">cart_comm_read</a> (char **cart_comm_recv_buf, ulapi_integer client_id)</td></tr>
<tr class="separator:a36848cb536204242a3ee45d9bb753b8a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9982dd0f466dd95898ebe0cf6fd168c5"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcart__comm.html#a9982dd0f466dd95898ebe0cf6fd168c5">cart_comm_read_init</a> (char **cart_comm_recv_buf, <a class="el" href="classcart__status__copy.html">cart_status_copy</a> *new_stat)</td></tr>
<tr class="separator:a9982dd0f466dd95898ebe0cf6fd168c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a90f2c5d14510aabfa28439a05e5bebb6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcart__comm.html#a90f2c5d14510aabfa28439a05e5bebb6">update_previous_dock</a> (ulapi_integer client_id)</td></tr>
<tr class="separator:a90f2c5d14510aabfa28439a05e5bebb6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Class for storing the communication configurations and operating/service status of multiple cart client processes. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="ab336b3d84b33ef32621e083dd4006b67"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab336b3d84b33ef32621e083dd4006b67">&#9670;&nbsp;</a></span>cart_comm()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cart_comm::cart_comm </td>
          <td>(</td>
          <td class="paramtype">ulapi_integer&#160;</td>
          <td class="paramname"><em>server_port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>num_clients</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulapi_id&#160;</td>
          <td class="paramname"><em>key_m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulapi_id&#160;</td>
          <td class="paramname"><em>key_s</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Constructor </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">server_port</td><td>Used to initialize port. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">num_clients</td><td>Used to initialize max_clients. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">key_m</td><td>Ulapi key used to initialize mutex. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">key_s</td><td>Ualpi key used to initialize connect_sem </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="af3b54bc88abece9901b0dc1a535c28f0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af3b54bc88abece9901b0dc1a535c28f0">&#9670;&nbsp;</a></span>~cart_comm()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cart_comm::~cart_comm </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Destructor </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a331ab61e71d5f94f413de56737322547"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a331ab61e71d5f94f413de56737322547">&#9670;&nbsp;</a></span>cart_comm_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cart_comm::cart_comm_init </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Initializes the server socket. </p><dl class="section return"><dt>Returns</dt><dd>Integer indicating the error status of the function. A negative number indicates an error occurred while attempting to initialize the socket. </dd></dl>

</div>
</div>
<a id="a36848cb536204242a3ee45d9bb753b8a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a36848cb536204242a3ee45d9bb753b8a">&#9670;&nbsp;</a></span>cart_comm_read()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cart_comm::cart_comm_read </td>
          <td>(</td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>cart_comm_recv_buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulapi_integer&#160;</td>
          <td class="paramname"><em>client_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Reads responses from the cart clients, expects messages to be delimited by newline with no null terminator. <br />
</p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">cart_comm_recv_buf</td><td>String pointer to hold the response recieved from the cart client </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">client_id</td><td>The socket descriptor for the cart client to receive information from. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>An integer indicating the error status of the ulapi socket. Returns a negative number if an error occurred while attempting to send the message. </dd></dl>

</div>
</div>
<a id="a9982dd0f466dd95898ebe0cf6fd168c5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9982dd0f466dd95898ebe0cf6fd168c5">&#9670;&nbsp;</a></span>cart_comm_read_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cart_comm::cart_comm_read_init </td>
          <td>(</td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>cart_comm_recv_buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classcart__status__copy.html">cart_status_copy</a> *&#160;</td>
          <td class="paramname"><em>new_stat</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Reads responses from the cart clients, expects messages to be delimited by newline with no null terminator. <br />
(Note to self: Not exactly sure how this function differs from cart_comm_read. May remove this). </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">cart_comm_recv_buf</td><td>String pointer to hold the response recieved from the cart client </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">client_id</td><td>The socket descriptor for the cart client to receive information from. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>An integer indicating the error status of the ulapi socket. Returns a negative number if an error occurred while attempting to send the message. </dd></dl>

</div>
</div>
<a id="a51c43bf924607212e128f75006defed8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a51c43bf924607212e128f75006defed8">&#9670;&nbsp;</a></span>cart_connect()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cart_comm::cart_connect </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Accepts new client on server, initializes and updates internal data structures. This function is fully mutexed. </p><dl class="section return"><dt>Returns</dt><dd>Integer indicating the error status of the function. A negative number indicates an error occurred while attempting to initialize the socket. </dd></dl>

</div>
</div>
<a id="acde9fbf68884955ccfd94a907add2396"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acde9fbf68884955ccfd94a907add2396">&#9670;&nbsp;</a></span>client_disconnect()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cart_comm::client_disconnect </td>
          <td>(</td>
          <td class="paramtype">ulapi_integer&#160;</td>
          <td class="paramname"><em>client_id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Disconnects client from server and updates internal data structures to release memory occupied by client status. This function is fully mutexed. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">client_id</td><td>The socket descriptor for the client to be disconnected. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Integer indicating the error status of the function. A negative number indicates an error occurred while attempting to initialize the socket. </dd></dl>

</div>
</div>
<a id="a33db5a17772cf87452ebdfae4547e152"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a33db5a17772cf87452ebdfae4547e152">&#9670;&nbsp;</a></span>get_client_count()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cart_comm::get_client_count </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Accessor function to return the current number of connected clients. This function is fully mutexed. </p><dl class="section return"><dt>Returns</dt><dd>The number of currently connected clients. </dd></dl>

</div>
</div>
<a id="a9f5d2a267cb9dd82603cea7656ad57fc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9f5d2a267cb9dd82603cea7656ad57fc">&#9670;&nbsp;</a></span>get_client_id()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ulapi_integer cart_comm::get_client_id </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>index</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Accessor function to return a client_id at a specific index in client_arr. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">index</td><td>Integer denoting the element of client_arr to return the client_id. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The socket descriptor for the client. Reutrns a negative number if no client exists at the location specified. </dd></dl>

</div>
</div>
<a id="a6dcf8cc0eedecebcd436653da2ab680d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6dcf8cc0eedecebcd436653da2ab680d">&#9670;&nbsp;</a></span>get_client_index()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cart_comm::get_client_index </td>
          <td>(</td>
          <td class="paramtype">ulapi_integer&#160;</td>
          <td class="paramname"><em>client_id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Accessor function to return the location of a client in client_arr given a client socket descriptor. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">client_id</td><td>Socket descriptor to search for in client_arr. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Index into client_arr where client_id was found. Returns a negative number if the client could not be found. </dd></dl>

</div>
</div>
<a id="a00fdba1bcb1d3e7234c83a1b2d692947"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a00fdba1bcb1d3e7234c83a1b2d692947">&#9670;&nbsp;</a></span>print_client_ids()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cart_comm::print_client_ids </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Prints a list of socket descriptors for all currently connected clients. Fully mutexed. </p>

</div>
</div>
<a id="a46b117a719b4844c97b570229c82cbc8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a46b117a719b4844c97b570229c82cbc8">&#9670;&nbsp;</a></span>print_client_status()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cart_comm::print_client_status </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Prints the contents of all client status structures for all currently connected clients. </p>

</div>
</div>
<a id="ab7f3cc745c6935abadf38a87a00740c8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab7f3cc745c6935abadf38a87a00740c8">&#9670;&nbsp;</a></span>recv()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cart_comm::recv </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulapi_integer&#160;</td>
          <td class="paramname"><em>client_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Wraps ulapi calls and error checks to read a message from a client socket. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">buf</td><td>Character buffer that will store the returned message. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">client_id</td><td>Socket descriptor of client from which the message will be recieved. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">len</td><td>Size of buf in bytes. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>An integer indicating the error status of the ulapi socket. Returns a negative number if an error occurred while attempting to recieve the message. </dd></dl>

</div>
</div>
<a id="a18d4c10fb7af8cb219460461fa5967f5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a18d4c10fb7af8cb219460461fa5967f5">&#9670;&nbsp;</a></span>select_client()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cart_comm::select_client </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>client_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classcart__status__copy.html">cart_status_copy</a> **&#160;</td>
          <td class="paramname"><em>copied_client</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Copies all the status info for a given client into a separate data structure. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">client_id</td><td>The socket descriptor of the client to copy. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">copied_client</td><td>The data structure that will store the copied data. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a0fd670aab891757e6371a66c4b48b0a3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0fd670aab891757e6371a66c4b48b0a3">&#9670;&nbsp;</a></span>send()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cart_comm::send </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulapi_integer&#160;</td>
          <td class="paramname"><em>client_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Sends command messages to a cart client process appending the current LD pose stored in the status internal structure to the message.<br />
Messages sent are formatted "%s:(%f, %f, %f)" Where the first string is the command to be sent to the cart client process and each float is the x, y, and theta components<br />
of the LD vehicle, repsectively. Intended for use with clients that already have been connected and initialized. Note that if a socket error occurs while attempting to send the message, the client will be disconnected. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">buf</td><td>Contains the command portion of the message. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">Socket</td><td>descriptor for the client the message will be sent to. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>An integer indicating the error status of the ulapi socket. Returns a negative number if an error occurred while attempting to send the message. </dd></dl>

</div>
</div>
<a id="ae135775f8ce91e322bd83ece751552b4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae135775f8ce91e322bd83ece751552b4">&#9670;&nbsp;</a></span>send_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cart_comm::send_init </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classcart__status__copy.html">cart_status_copy</a> *&#160;</td>
          <td class="paramname"><em>new_stat</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Sends command messages to a cart client process appending the current LD pose stored in the status internal structure to the message.<br />
 Messages sent are formatted "%s:(%f, %f, %f)" Where the first string is the command to be sent to the cart client process and each float is the x, y, and theta components<br />
 of the LD vehicle, repsectively. Same as send process but omits an extra error check for newly connected clients since the socket is opened before the<br />
 data structures tracking the status of the client are added to the vehicle process's internal data structures.<br />
 Note that if a socket error occurs while attempting to send the message, the client will be disconnected.<br />
Intended for use with newly connected clients. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">buf</td><td>Contains the command portion of the message. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">Socket</td><td>descriptor for the client the message will be sent to. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>An integer indicating the error status of the ulapi socket. Returns a negative number if an error occurred while attempting to send the message. </dd></dl>

</div>
</div>
<a id="acea9c1ef1278323dd0e387b34c5c8015"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acea9c1ef1278323dd0e387b34c5c8015">&#9670;&nbsp;</a></span>simple_scheduler()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ulapi_integer cart_comm::simple_scheduler </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Scheduling function to select the next client to service. Essentially a First Come First Served scheduling algorithm. </p><dl class="section return"><dt>Returns</dt><dd>The socket descriptor for the next client to service. </dd></dl>

</div>
</div>
<a id="a90f2c5d14510aabfa28439a05e5bebb6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a90f2c5d14510aabfa28439a05e5bebb6">&#9670;&nbsp;</a></span>update_previous_dock()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cart_comm::update_previous_dock </td>
          <td>(</td>
          <td class="paramtype">ulapi_integer&#160;</td>
          <td class="paramname"><em>client_id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Updates the previous location of a client so that the vehicle may return to that client when scheduling it for service. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">client_id</td><td>The socket descriptor of the client to update. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ac3827fcfb77461137bf7a061471c7feb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac3827fcfb77461137bf7a061471c7feb">&#9670;&nbsp;</a></span>update_status() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cart_comm::update_status </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="deprecated"><dt><b><a class="el" href="deprecated.html#_deprecated000001">Deprecated:</a></b></dt><dd>Updates the status of all cart clients. First sends the command "rcstatus" to cart processes, then calls update_status on internal data structures to update the data structure. Use of this function is deprecated as the current pose of each client in the vehicle process's internal data structures is not updated. Mainly used for testing communications. </dd></dl>

</div>
</div>
<a id="a6724898e4c76e4e802c4bc6b814130bc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6724898e4c76e4e802c4bc6b814130bc">&#9670;&nbsp;</a></span>update_status() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cart_comm::update_status </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structld__msg__pose.html">ld_msg_pose</a> *&#160;</td>
          <td class="paramname"><em>new_pose</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Updates the status of all cart clients. First sends the command "rcstatus" to cart processes, then calls update_status on internal data structures to update the data structure. This function also updates the current pose contained in the internal data structures. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">new_pose</td><td>Pointer to a structure containing the updated pose information for each client. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aa4aa3baa5fae85a6469ae9683a6d2cbc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa4aa3baa5fae85a6469ae9683a6d2cbc">&#9670;&nbsp;</a></span>update_status_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cart_comm::update_status_init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classcart__status__copy.html">cart_status_copy</a> *&#160;</td>
          <td class="paramname"><em>new_stat</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Initializes the status of a new cart client. First sends a command to the cart process and updates the contents the internal data structures of this process using the message recieved from the cart process.<br />
Sends the "rcstatinit" command to cart process and calls update status to change internal data structures. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">new_stat</td><td>Pointer to </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Integer indicating the error status of the function. A negative number is returned if an error occurred. </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="cart__comm_8h_source.html">cart_comm.h</a></li>
<li><a class="el" href="cart__comm_8cpp.html">cart_comm.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
